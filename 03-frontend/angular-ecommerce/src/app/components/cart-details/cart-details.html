
<div class="main-content">
    <div class="section-content section-content-p30">
        <div class="container-fluid">

            <!-- Carrito con productos -->
            @if (cartItems.length > 0) {

            <!-- Título del carrito -->
            <div class="cart-header">
                <h2><i class="fa fa-shopping-cart"></i> Cart Details</h2>
                <p class="cart-subtitle">{{ cartItems.length }} {{ cartItems.length === 1 ? 'item' : 'items' }} in your cart</p>
            </div>

            <div class="row">
                <!-- Columna de productos -->
                <div class="col-lg-8">
                    <div class="cart-items-container">

                        @for (tempCartItem of cartItems; track $index) {
                        <div class="cart-item-card">
                            <div class="row align-items-center">
                                
                                <!-- Imagen del producto -->
                                <div class="col-md-3 col-sm-4">
                                    <div class="product-image-wrapper">
                                        <a [routerLink]="['/products', tempCartItem.id]">
                                        <img src="{{ tempCartItem.imageUrl }}" class="img-responsive">
                                        </a>
                                    </div>
                                </div>

                                <!-- Detalles del producto -->
                                <div class="col-md-4 col-sm-8">
                                    <div class="product-details">
                                        <h4 class="product-name">
                                        <a [routerLink]="['/products', tempCartItem.id]">
                                            {{ tempCartItem.name }}
                                        </a>
                                        </h4>
                                        <p class="product-price">{{ tempCartItem.unitPrice | currency:'EUR' }}</p>
                                    </div>
                                </div>

                                <!-- Controles de cantidad -->
                                <div class="col-md-3 col-sm-7">
                                    <div class="quantity-controls">
                                        <label class="quantity-label">Quantity:</label>
                                        <div class="quantity-selector">
                                            <button (click)="decrementQuantity(tempCartItem)" 
                                                    class="btn-quantity btn-minus"
                                                    [disabled]="tempCartItem.quantity <= 1">
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <span class="quantity-display">{{ tempCartItem.quantity }}</span>
                                            <button (click)="incrementQuantity(tempCartItem)" 
                                                    class="btn-quantity btn-plus">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Subtotal y acciones -->
                                <div class="col-md-2 col-sm-5">
                                    <div class="item-actions">
                                        <p class="item-subtotal">
                                            {{ tempCartItem.quantity * tempCartItem.unitPrice | currency:'EUR' }}
                                        </p>
                                        <button (click)="remove(tempCartItem)" 
                                                class="btn-remove">
                                            <i class="fas fa-trash-alt"></i> Delete
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                        }

                    </div>
                </div>

                <!-- Columna del resumen -->
                <div class="col-lg-4">
                    <div class="cart-summary-sticky">
                        <div class="cart-summary">
                            <h3>Cart Summary</h3>

                            <div class="summary-line">
                                <span class="summary-label">
                                    <i class="fa fa-shopping-bag"></i> Total items:
                                </span>
                                <span class="summary-value">{{ totalQuantity }}</span>
                            </div>

                            <div class="summary-line">
                                <span class="summary-label">
                                    <i class="fa fa-tags"></i> Subtotal:
                                </span>
                                <span class="summary-value">{{ totalPrice | currency:'EUR' }}</span>
                            </div>

                            <div class="summary-line shipping-line">
                                <span class="summary-label">
                                    <i class="fa fa-truck"></i> Shipping:
                                </span>
                                <span class="summary-value free-shipping">FREE</span>
                            </div>

                            <div class="summary-divider"></div>

                            <div class="summary-total">
                                <span class="total-label">Total:</span>
                                <span class="total-value">{{ totalPrice | currency:'EUR' }}</span>
                            </div>

                            <a routerLink="/checkout" class="btn-checkout">
                                <i class="fa fa-lock"></i> Proceed to Checkout
                            </a>

                            <a routerLink="/products" class="btn-continue">
                                <i class="fa fa-arrow-left"></i> Continue Shopping
                            </a>

                            <div class="trust-badges">
                                <div class="trust-item">
                                    <i class="fa fa-shield"></i>
                                    <span>Secure Payment</span>
                                </div>
                                <div class="trust-item">
                                    <i class="fa fa-refresh"></i>
                                    <span>30-Day Returns</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            }

            <!-- Carrito vacío -->
            @if(cartItems.length == 0) {
            <div class="empty-cart">
                <div class="empty-cart-content">
                    <i class="fa fa-shopping-cart"></i>
                    <h3>Your Cart is Empty</h3>
                    <p>Looks like you haven't added anything to your cart yet.</p>
                    <a routerLink="/products" class="btn-shop-now">
                        <i class="fa fa-shopping-bag"></i> Start Shopping Now
                    </a>
                </div>
            </div>
            }

        </div>
    </div>
</div>